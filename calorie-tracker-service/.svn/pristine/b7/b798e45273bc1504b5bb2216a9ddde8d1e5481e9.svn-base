package ca.pragmaticdev.ws.controller;

import ca.pragmaticdev.ws.data.Authorization;
import ca.pragmaticdev.ws.service.AuthenticationService;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;


@RestController
public class AuthenticationController {

    protected static Logger logger = Logger.getLogger(AuthenticationController.class);

    @Autowired(required = true)
    private AuthenticationService service;

    @RequestMapping(value= "/ws/data/authenticate", method = RequestMethod.GET, produces = "application/json")
    public ResponseEntity<Authorization> authenticate(@RequestParam("username") String username,
                                                      @RequestParam("password") String password) {

        return service.authenticate(username,password);
    }


  /*  HttpHeaders createHeaders(String username, String password) {
        HttpHeaders acceptHeaders = new HttpHeaders() {
            {
                set(HttpHeaders.ACCEPT,MediaType.APPLICATION_JSON.toString());
            }
        };
        String authorization = username + ":" + password;
        String basic = new String(Base64.encodeBase64
                (authorization.getBytes(Charset.forName("US-ASCII"))));
        acceptHeaders.set("Authorization", "Basic " + basic);

        return acceptHeaders;
    }*/
}
